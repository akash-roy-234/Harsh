You need to replace the placeholders in the script with actual values specific to your Azure environment.
Run the below commands to get the value

$subscriptionId = "<YourSubscriptionId>"
$resourceGroupName = "<YourResourceGroupName>"
$storageAccountName = "<YourStorageAccountName>"
$containerName = "condition-access-ips"
$fileName = "ConditionAccessIPs.txt"




# Set variables
$managedIdentityObjectId = "92c0bd04-2115-4c32-9210-cb02a2898dfb"  # Replace with your managed identity's object ID
$tenantId = "0b6a780e-a9c6-4482-97dc-2aecb06ee1ba"  # Your tenant ID

# Grant Microsoft Graph permissions to the managed identity
$apiAppId = "00000003-0000-0000-c000-000000000000"  # Microsoft Graph App ID
$permissionName = "Policy.Read.All"

# Get the Microsoft Graph service principal
$graphServicePrincipal = Get-AzADServicePrincipal -ApplicationId $apiAppId

# Create a new App Role Assignment for the managed identity
New-AzADServicePrincipalAppRoleAssignment -ObjectId $managedIdentityObjectId `
                                          -PrincipalId $managedIdentityObjectId `
                                          -ResourceId $graphServicePrincipal.Id `
                                          -Id ([Guid]"dc50a0fb-09a3-4b4e-8aeb-3c194e6f9a80")
